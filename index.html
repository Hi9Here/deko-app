<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
    <meta name="description" content="Deko Makes the Web Simple. It's as easy as that'">
    <title>Deko</title>
    <meta name="theme-color" content="#fff">
    <link rel="manifest" href="/manifest.json">
    <script src="/__/firebase/4.6.1/firebase-app.js"></script>
    <script src="/__/firebase/4.6.1/firebase-auth.js"></script>
    <script src="/__/firebase/4.6.1/firebase-firestore.js"></script>
    <script src="/__/firebase/init.js"></script>
    <script src="/bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="/bower_components/deko-page/deko-page.html">
    <link rel="import" href="/bower_components/app-route/app-location.html">
    <link rel="import" href="/bower_components/firebase-ui-auth/firebase-ui-auth.html">

    <style>
      html, body {
        margin: 0;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <template is="dom-bind" id="app">
      <app-location route="{{route}}"></app-location>
      <deko-page user="[[user]]" on-logout="logout" on-login="login" route="{{route}}" search="{{search}}">
        <img src="/deko-150.png"/>
        <firebase-ui-auth bugfix id="auth" user="{{user}}" photo="{{user.imageUrl}}" sign-in-success-url="" sign-in='["GoogleAuthProvider","EmailAuthProvider"]'></firebase-ui-auth>
      </deko-page>
    </template>
  </body>
  <script>
    var _0x6bb7=["\x66\x69\x72\x65\x73\x74\x6F\x72\x65"];
    var db = firebase.firestore()
    var app = document.querySelector('#app')
    app.logout = function() { app.$.auth.signOut() }
    app.login = function() { app.$.auth.trySignIn() }
    firebase.firestore().enablePersistence().then(function() {
      // Initialize Cloud Firestore through firebase
      db = firebase.firestore()
    }).catch(function(err) {
      
      if (err.code == 'failed-precondition') {
        // Multiple tabs open, persistence can only be enabled
        // in one tab at a a time.
        // ...
      } else if (err.code == 'unimplemented') {
        // The current browser does not support all of the
        // features required to enable persistence
        // ...
      }
   })
  </script>
</html>
